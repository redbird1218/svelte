import{w as v}from"./index.15f46245.js";import{a4 as j}from"./index.bca4a7a4.js";v(void 0);const J=v(void 0);function se(e,t){const{computePosition:o,autoUpdate:n,offset:a,shift:c,flip:i,arrow:p,size:E,autoPlacement:l,hide:m,inline:b}=j(J);let u={open:!1,autoUpdateCleanup:()=>{}};const x=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let C;const w="https://www.skeleton.dev/utilities/popups";let r,y;function P(){r=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),y=(r==null?void 0:r.querySelector(".arrow"))??document.createElement("div")}P();function k(){var d,h,$,D,T,F,A,_;if(!r)throw new Error(`The data-popup="${t.target}" element was not found. ${w}`);if(!o)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${w}`);if(!a)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${w}`);if(!c)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${w}`);if(!i)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${w}`);if(!p)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${w}`);const s=[];E&&s.push(E((d=t.middleware)==null?void 0:d.size)),l&&s.push(l((h=t.middleware)==null?void 0:h.autoPlacement)),m&&s.push(m(($=t.middleware)==null?void 0:$.hide)),b&&s.push(b((D=t.middleware)==null?void 0:D.inline)),o(e,r,{placement:t.placement??"bottom",middleware:[a(((T=t.middleware)==null?void 0:T.offset)??8),c(((F=t.middleware)==null?void 0:F.shift)??{padding:8}),i((A=t.middleware)==null?void 0:A.flip),p(((_=t.middleware)==null?void 0:_.arrow)??{element:y||null}),...s]}).then(({x:H,y:Q,placement:V,middlewareData:W})=>{if(Object.assign(r.style,{left:`${H}px`,top:`${Q}px`}),y){const{x:O,y:q}=W.arrow,B={top:"bottom",right:"left",bottom:"top",left:"right"}[V.split("-")[0]];Object.assign(y.style,{left:O!=null?`${O}px`:"",top:q!=null?`${q}px`:"",right:"",bottom:"",[B]:"-4px"})}})}function L(){r&&(u.open=!0,t.state&&t.state({state:u.open}),k(),r.style.display="block",r.style.opacity="1",r.style.pointerEvents="auto",u.autoUpdateCleanup=n(e,r,k),C=Array.from(r==null?void 0:r.querySelectorAll(x)))}function f(s){if(!r)return;const d=parseFloat(window.getComputedStyle(r).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{u.open=!1,t.state&&t.state({state:u.open}),r.style.opacity="0",r.style.pointerEvents="none",u.autoUpdateCleanup&&u.autoUpdateCleanup(),s&&s()},d)}function U(){u.open===!1?L():f()}function S(s){if(u.open===!1||e.contains(s.target))return;if(r&&r.contains(s.target)===!1){f();return}const d=t.closeQuery===void 0?"a[href], button":t.closeQuery,h=r==null?void 0:r.querySelectorAll(d);h==null||h.forEach($=>{$.contains(s.target)&&f()})}const g=s=>{if(u.open===!1)return;const d=s.key;if(d==="Escape"){s.preventDefault(),e.focus(),f();return}u.open&&document.activeElement===e&&(d==="ArrowDown"||d==="Tab")&&(s.preventDefault(),x.length>0&&C[0].focus())};switch(t.event){case"click":e.addEventListener("click",U,!0),window.addEventListener("click",S,!0);break;case"hover":e.addEventListener("mouseover",L,!0),e.addEventListener("mouseleave",f,!0);break;case"focus-blur":e.addEventListener("focus",U,!0),e.addEventListener("blur",f,!0);break;case"focus-click":e.addEventListener("focus",L,!0),window.addEventListener("click",S,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${w}`)}return window.addEventListener("keydown",g,!0),k(),{update(s){f(()=>{t=s,k(),P()})},destroy(){e.removeEventListener("click",U,!0),e.removeEventListener("mouseover",L,!0),e.removeEventListener("mouseleave",f,!0),e.removeEventListener("focus",U,!0),e.removeEventListener("focus",L,!0),e.removeEventListener("blur",f,!0),window.removeEventListener("click",S,!0),window.removeEventListener("keydown",g,!0)}}}function K(){const{subscribe:e,set:t,update:o}=v({});return{subscribe:e,set:t,update:o,open:n=>o(()=>({open:!0,...n})),close:()=>o(n=>(n.open=!1,n))}}K();function X(){const{subscribe:e,set:t,update:o}=v([]);return{subscribe:e,set:t,update:o,trigger:n=>o(a=>(a.push(n),a)),close:()=>o(n=>(n.length>0&&n.shift(),n)),clear:()=>t([])}}X();const Y={message:"Missing Toast Message",autohide:!0,timeout:5e3};function G(){const e=Math.random();return Number(e).toString(32)}function R(e){if(e.autohide===!0)return setTimeout(()=>{N.close(e.id)},e.timeout)}function Z(){const{subscribe:e,set:t,update:o}=v([]);return{subscribe:e,trigger:n=>o(a=>{const c=G();n&&n.callback&&n.callback({id:c,status:"queued"});const i={...Y,...n,id:c};return i.timeoutId=R(i),a.push(i),a}),close:n=>o(a=>{if(a.length>0){const c=a.findIndex(p=>p.id===n),i=a[c];i&&(i.callback&&i.callback({id:n,status:"closed"}),i.timeoutId&&clearTimeout(i.timeoutId),a.splice(c,1))}return a}),clear:()=>t([])}}const N=Z(),I={};function z(e){return e==="local"?localStorage:sessionStorage}function M(e,t,o){const n=(o==null?void 0:o.serializer)??JSON,a=(o==null?void 0:o.storage)??"local";function c(i,p){z(a).setItem(i,n.stringify(p))}if(!I[e]){const i=v(t,l=>{const m=z(a).getItem(e);m&&l(n.parse(m));{const b=u=>{u.key===e&&l(u.newValue?n.parse(u.newValue):null)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)}}),{subscribe:p,set:E}=i;I[e]={set(l){c(e,l),E(l)},update(l){const m=l(j(i));c(e,m),E(m)},subscribe:p}}return I[e]}const ee=M("modeOsPrefers",!1),te=M("modeUserPrefers",void 0),ne=M("modeCurrent",!1);function ae(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return ee.set(e),e}function ie(e){te.set(e)}function ue(e){const t=document.documentElement.classList,o="dark";e===!0?t.remove(o):t.add(o),ne.set(e)}function ce(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",o=!("modeUserPrefers"in localStorage),n=window.matchMedia("(prefers-color-scheme: dark)").matches;t||o&&n?e.add("dark"):e.remove("dark")}export{ce as a,ue as b,ie as c,ae as g,ne as m,se as p,J as s};
